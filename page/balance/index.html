<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SFT Wallet</title>
  <link rel="stylesheet" href="./css/index.css">
  <script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/gh/jquery-i18n-properties/jquery-i18n-properties/jquery.i18n.properties.min.js"></script>

</head>

<body>
  <div class="header">
    <div class="headerLeft">
      <div class="logoBox">
        <img src="../../assets/walletIndex/logo.svg" alt="logo">
      </div>
      <div class="selectBox">
        <a href="../balance/index.html">
          <div class="selectBoxCell currSelect">
            <img src="../../assets/balance/wallet.svg" alt="">
            <p>Wallet</p>
          </div>
        </a>

        <a href="../account/index.html">
          <div class="selectBoxCell">
            <img src="../../assets/balance/accountNot.svg" alt="">
            <p>Account</p>
          </div>
        </a>
      </div>
    </div>
    <div class="languageBox">
      <div class="addressBox">
        <img class="addressIcon" src="../../assets/balance/address.svg" alt="address">
        <p id="lab_addr_1">...</p>
        <img class="arrowIcon" src="../../assets/balance/arrow.svg" alt="arrow">
      </div>
      <div class="custom-select">
        <div class="select-selected">
          <img src="../../assets/walletIndex/Language.svg" alt="arrow">
          <p>Language</p>
          <img src="../../assets/walletIndex/arrow.svg" alt="arrow">
        </div>
        <div class="select-items" style="display: none;">
          <div data-value="en">English</div>
          <div data-value="zh">中文</div>
        </div>
      </div>


    </div>
  </div>
  <div class="accountPop" style="display: none">
    <p class="accountPopTitle" data-lang="Account">
      Account
    </p>
    <div class="accountInfoBox">
      <div class="accountInfoBoxLeft">
        <p id="lab_addr_2">...</p>
        <span id="lab_balance_1">0 SPD</span>
      </div>
      <div class="copyBtn" onclick="javascript:window.copyAddr();">
        <img src="../../assets/balance/copy.svg" alt="copy">
      </div>
      <div class="viewBtn">
        <img src="../../assets/balance/view.svg" alt="view">
      </div>
    </div>
    <a href="../importAccount/index.html">
      <button class="importAccountBtn">
        <img src="../../assets/balance/import.svg" alt="import">
        <p data-lang="importAccount">Import Account</p>
      </button>
    </a>
    <a href="../createAccount/index.html">
      <button class="createNewAccountBtn">
        <img src="../../assets/balance/create.svg" alt="import">
        <p data-lang="createNewAccount">Create New Account</p>
      </button>
    </a>
  </div>
  <div class="content">
    <div class="balanceBox">
      <div class="tabContainer">
        <div class="tabButtons">
          <button class="tabButton active" dataTab="balances" data-lang="balances">Balances</button>
          <button class="tabButton" dataTab="activity" data-lang="activity">Activity</button>
        </div>
        <div class="tabContent">
          <div class="tabItem active" id="balances">
            <div class="sendBox">
              <p class="balance" id="lab_balance_2">0 SFT</p>
              <div class="sendBtnBox">
                <a href="../sendAndReceive/index.html">
                  <button class="sendBtn" data-value="send">Send</button>
                </a>
                <a href="../sendAndReceive/index.html">
                  <button class="receiveBtn" data-value="receive">Receive</button>
                </a>
              </div>
            </div>
            <div class="yourPortfolioBox">
              <p class="yourPortfolio" data-lang="yourPortfolio">
                Your Portfolio
              </p>
              <p class="tokenBalance" data-lang="tokenBalance">
                Token Balance
              </p>
            </div>
            <div class="tokenCellBox">
              <div class="tokenCell">
                <div class="tokenCellLeft">
                  <img src="../../assets/balance/spdToken.svg" alt="spdToken">
                  <p>SFT</p>
                </div>
                <p id="lab_balance_3">
                  0
                </p>
              </div>
              <!-- <div class="tokenCell">
                <div class="tokenCellLeft">
                  <img src="../../assets/balance/spdToken.svg" alt="spdToken">
                  <p>rSPD</p>
                </div>
                <p>
                  56.23
                </p>
              </div> -->
            </div>
          </div>
          <div class="tabItem" id="activity">
            <div class="activeTitle">
              <p data-lang="recentActivity">Recent activity</p>
            </div>
            <div class="activeCellBox" id="id_list_txs" style="height: 250px;overflow-y: auto;">
              <!-- <div class="activeCell">
                <div class="activeCellLeft">
                  <img src="../../assets/balance/transfer.svg" alt="transfer">
                  <div>
                    <p class="transferName">Send SPD </p>
                    <div class="addressTo">
                      <span>to</span>
                      <p>Oxdfafkfjsakfa...</p>
                    </div>
                  </div>
                </div>
                <div class="activeCellRight">
                  <p>
                    -5.344 SPD
                  </p>
                  <span>
                    1d
                  </span>
                </div>
              </div>
              <div class="activeCell">
                <div class="activeCellLeft">
                  <img src="../../assets/balance/transfer.svg" alt="transfer">
                  <div>
                    <p class="transferName">Send SPD </p>
                    <div class="addressTo">
                      <span>to</span>
                      <p>Oxdfafkfjsakfa...</p>
                    </div>
                  </div>
                </div>
                <div class="activeCellRight">
                  <p>
                    -5.344 SPD
                  </p>
                  <span>
                    1d
                  </span>
                </div>
              </div>
              <div class="activeCell">
                <div class="activeCellLeft">
                  <img src="../../assets/balance/transferIn.svg" alt="transfer">
                  <div>
                    <p class="transferName">Send SPD </p>
                    <div class="addressTo">
                      <span>for</span>
                      <p>Oxdfafkfjsakfa...</p>
                    </div>
                  </div>
                </div>
                <div class="activeCellRight">
                  <p>
                    -5.344 SPD
                  </p>
                  <span>
                    1d
                  </span>
                </div>
              </div>
              <div class="activeCell">
                <div class="activeCellLeft">
                  <img src="../../assets/balance/transfer.svg" alt="transfer">
                  <div>
                    <p class="transferName">Send SPD </p>
                    <div class="addressTo">
                      <span>to</span>
                      <p>Oxdfafkfjsakfa...</p>
                    </div>
                  </div>
                </div>
                <div class="activeCellRight">
                  <p>
                    -5.344 SPD
                  </p>
                  <span>
                    1d
                  </span>
                </div>
              </div> -->
            </div>
            <button class="sureBtn" onclick="javascript:window.clickMoreTxs();">
              <p data-lang="viewAll">View All</p>
            </button>
          </div>
        </div>
      </div>


    </div>
  </div>
  </div>
  <script src="../../assets/js/init.js"></script>
  <script src="./js/index.js"></script>
  <script src="../../core/axios.min.js"></script>
	<script src="../../core/babel-browser.min.js"></script>
	<script src="../../core/bitcore-mnemonic.js"></script>
	<script src="../../core/bignumber.js"></script>
	<script src="../../core/lang/ch.js"></script>
	<script src="../../core/lang/en.js"></script>
	<script src="../../core/core.js"></script>
	<script src="../../core/Base58.js"></script>

	<script type="text/javascript">
		window.onload = function() {
			changeLang();

			var chain = getCreatedChain();
			if(chain == null) {
				chain = "SFT";
			}
			System.chain = chain;

			var curr = getCurrent();

			document.getElementById("lab_addr_1").innerHTML = lessAddr(curr.addr, 12);
			document.getElementById("lab_addr_2").innerHTML = lessAddr(curr.addr, 12);
			
			rpc_getBalance(curr.addr, function(data_bal) {
				var x = new BigNumber(data_bal);
				x /= 1e18;
				document.getElementById("lab_balance_1").innerHTML = x.toFixed(4) + " SFT";
				document.getElementById("lab_balance_2").innerHTML = x.toFixed(4) + " SFT";
				document.getElementById("lab_balance_3").innerHTML = x.toFixed(4);
			}, function(err_bal) {

			})

			setTimeout(function() {
				window.renderTxs(1, 4)
			}, 200);
		}

		window.renderTxs = function(pageIndex, pageCount) {
			var curr = getCurrent();
			proxyTxs(curr.addr, pageIndex, pageCount, function(data_list) {
				var html = "";
				for(var i = 0; i < data_list.list.length; i++) {
					var tImg = "../../assets/balance/transferIn.svg";
					var tDir = "for";
					var tSymbol = "+";
					var tAccount = (data_list.list[i].from == curr.addr) ? data_list.list[i].to : data_list.list[i].from;
					var tDesc = "Receive";
					if(data_list.list[i].from == curr.addr) {
						tImg = "../../assets/balance/transfer.svg"
						tDir = "to";
						tSymbol = "-";
						tDesc = "Send";
					}

					html += `<div class="activeCell">
	                <div class="activeCellLeft">
	                  <img src="{0}" alt="transfer">
	                  <div>
	                    <p class="transferName">{6} SFT </p>
	                    <div class="addressTo">
	                      <span>{1}</span>
	                      <p>{2}</p>
	                    </div>
	                  </div>
	                </div>
	                <div class="activeCellRight">
	                  <p>
	                    {3}{4} SFT
	                  </p>
	                  <span>
	                    {5}
	                  </span>
	                </div>
	              </div>`.format(tImg, tDir, lessAddr(tAccount, 12), tSymbol, showAmount(data_list.list[i].value, 18), getLocalTime(data_list.list[i].time), tDesc);
				}
				document.getElementById("id_list_txs").innerHTML = html;
			}, function(err_list) {

			})
		}

		window.clickMoreTxs = function() {
			window.renderTxs(1, 30);
		}

		window.copyAddr = function() {
			var curr = getCurrent();
			var oInput = document.createElement('input');
            oInput.value = curr.addr;
            document.body.appendChild(oInput);
            oInput.select(); // 选择对象
            document.execCommand("Copy"); // 执行浏览器复制命令
            oInput.className = 'oInput';
            oInput.style.display='none';
            showToast("success", "Copied");
		}
	</script>

</body>

</html>